<div class="container">
  <div style="text-align: center; margin: 5%">
    <h2>Buscar Recursos por Tipo y Nivel</h2>
  </div>

  <!-- Formulario de búsqueda -->
  <form [formGroup]="form" class="filters" style="text-align: center; margin: 20px;">
    <mat-form-field style="margin-right: 20px;">
      <mat-label>Tipo</mat-label>
      <input matInput formControlName="tipo" placeholder="Ej: Libro" />
    </mat-form-field>

    <mat-form-field>
      <mat-label>Nivel</mat-label>
      <input matInput formControlName="nivel" placeholder="Ej: Intermedio" />
    </mat-form-field>
  </form>

  <!-- Mensaje de estado -->
  <div *ngIf="mensaje" style="color: red; margin: 10px 0; text-align: center; font-weight: bold;">
    {{ mensaje }}
  </div>

  <!-- Tabla de resultados -->
  <div *ngIf="dataSource.data.length > 0">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
      <!-- ID Column -->
      <ng-container matColumnDef="c1">
        <th mat-header-cell *matHeaderCellDef>ID</th>
        <td mat-cell *matCellDef="let element">{{ element.idRecurso }}</td>
      </ng-container>

      <!-- Título Column -->
      <ng-container matColumnDef="c2">
        <th mat-header-cell *matHeaderCellDef>Título</th>
        <td mat-cell *matCellDef="let element">{{ element.tituloRecurso }}</td>
      </ng-container>

      <!-- Descripción Column -->
      <ng-container matColumnDef="c3">
        <th mat-header-cell *matHeaderCellDef>Descripción</th>
        <td mat-cell *matCellDef="let element">{{ element.descripcionRecurso }}</td>
      </ng-container>

      <!-- Tipo Column -->
      <ng-container matColumnDef="c4">
        <th mat-header-cell *matHeaderCellDef>Tipo</th>
        <td mat-cell *matCellDef="let element">{{ element.tipoRecurso }}</td>
      </ng-container>

      <!-- Nivel Column -->
      <ng-container matColumnDef="c5">
        <th mat-header-cell *matHeaderCellDef>Nivel</th>
        <td mat-cell *matCellDef="let element">{{ element.nivelRecurso }}</td>
      </ng-container>

      <!-- URL Column -->
      <ng-container matColumnDef="c6">
        <th mat-header-cell *matHeaderCellDef>URL</th>
        <td mat-cell *matCellDef="let element">
          <a [href]="element.urlRecurso" target="_blank" rel="noopener noreferrer">
            {{ element.urlRecurso }}
          </a>
        </td>
      </ng-container>

      <!-- Usuario Column -->
      <ng-container matColumnDef="cF">
        <th mat-header-cell *matHeaderCellDef>Usuario</th>
        <td mat-cell *matCellDef="let element">{{ element.usuario?.username || 'Sin usuario' }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </div>

  <!-- Mensaje cuando no hay datos -->
  <div *ngIf="dataSource.data.length === 0 && !mensaje" style="text-align: center; margin: 20px; color: gray;">
    <p>No hay registros para mostrar. Completa los filtros para buscar.</p>
  </div>
</div>